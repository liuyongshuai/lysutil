SET(protobuf_home ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty/protobuf-3.21.12/google/protobuf)
MESSAGE(STATUS "protobuf_home=${protobuf_home}")
SET(PROTOBUF_SOURCE_LIST
        ${protobuf_home}/any.cc
        ${protobuf_home}/stubs/bytestream.cc
        ${protobuf_home}/stubs/int128.cc
        ${protobuf_home}/stubs/structurally_valid.cc
        ${protobuf_home}/stubs/status.cc
        ${protobuf_home}/stubs/common.cc
        ${protobuf_home}/stubs/statusor.cc
        ${protobuf_home}/stubs/strutil.cc
        ${protobuf_home}/stubs/stringprintf.cc
        ${protobuf_home}/stubs/time.cc
        ${protobuf_home}/stubs/substitute.cc
        ${protobuf_home}/stubs/stringpiece.cc
        ${protobuf_home}/descriptor.pb.cc
        ${protobuf_home}/any_lite.cc
        ${protobuf_home}/descriptor_database.cc
        ${protobuf_home}/reflection_ops.cc
        ${protobuf_home}/arena.cc
        ${protobuf_home}/inlined_string_field.cc
        ${protobuf_home}/util/time_util.cc
        ${protobuf_home}/util/field_mask_util.cc
        ${protobuf_home}/util/delimited_message_util.cc
        ${protobuf_home}/util/field_comparator.cc
        ${protobuf_home}/util/message_differencer.cc
        ${protobuf_home}/util/json_util.cc
        ${protobuf_home}/util/internal/protostream_objectsource.cc
        ${protobuf_home}/util/internal/field_mask_utility.cc
        ${protobuf_home}/util/internal/object_writer.cc
        ${protobuf_home}/util/internal/json_stream_parser.cc
        ${protobuf_home}/util/internal/protostream_objectwriter.cc
        ${protobuf_home}/util/internal/proto_writer.cc
        ${protobuf_home}/util/internal/utility.cc
        ${protobuf_home}/util/internal/json_objectwriter.cc
        ${protobuf_home}/util/internal/error_listener.cc
        ${protobuf_home}/util/internal/datapiece.cc
        ${protobuf_home}/util/internal/default_value_objectwriter.cc
        ${protobuf_home}/util/internal/type_info.cc
        ${protobuf_home}/util/internal/json_escaping.cc
        ${protobuf_home}/util/type_resolver_util.cc
        ${protobuf_home}/type.pb.cc
        ${protobuf_home}/empty.pb.cc
        ${protobuf_home}/extension_set_heavy.cc
        ${protobuf_home}/map.cc
        ${protobuf_home}/message_lite.cc
        ${protobuf_home}/io/zero_copy_stream_impl_lite.cc
        ${protobuf_home}/io/zero_copy_stream_impl.cc
        ${protobuf_home}/io/coded_stream.cc
        ${protobuf_home}/io/printer.cc
        ${protobuf_home}/io/tokenizer.cc
        ${protobuf_home}/io/gzip_stream.cc
        ${protobuf_home}/io/zero_copy_stream.cc
        ${protobuf_home}/io/strtod.cc
        ${protobuf_home}/io/io_win32.cc
        ${protobuf_home}/wire_format_lite.cc
        ${protobuf_home}/parse_context.cc
        ${protobuf_home}/source_context.pb.cc
        ${protobuf_home}/wrappers.pb.cc
        ${protobuf_home}/unknown_field_set.cc
        ${protobuf_home}/any.pb.cc
        ${protobuf_home}/repeated_field.cc
        ${protobuf_home}/field_access_listener.h
        ${protobuf_home}/generated_message_reflection.cc
        ${protobuf_home}/implicit_weak_message.cc
        ${protobuf_home}/duration.pb.cc
        ${protobuf_home}/arenaz_sampler.cc
        ${protobuf_home}/struct.pb.cc
        ${protobuf_home}/arenastring.cc
        ${protobuf_home}/generated_message_util.cc
        ${protobuf_home}/generated_message_bases.cc
        ${protobuf_home}/api.pb.cc
        ${protobuf_home}/message.cc
        ${protobuf_home}/service.cc
        ${protobuf_home}/descriptor.cc
        ${protobuf_home}/generated_message_tctable_lite.cc
        ${protobuf_home}/wire_format.cc
        ${protobuf_home}/dynamic_message.cc
        ${protobuf_home}/map_field.cc
        ${protobuf_home}/compiler/command_line_interface.cc
        ${protobuf_home}/compiler/code_generator.cc
        ${protobuf_home}/compiler/zip_writer.cc
        ${protobuf_home}/compiler/parser.cc
        ${protobuf_home}/compiler/plugin.cc
        ${protobuf_home}/compiler/subprocess.cc
        ${protobuf_home}/compiler/plugin.pb.cc
        ${protobuf_home}/compiler/cpp/enum_field.cc
        ${protobuf_home}/compiler/cpp/enum.cc
        ${protobuf_home}/compiler/cpp/helpers.cc
        ${protobuf_home}/compiler/cpp/file.cc
        ${protobuf_home}/compiler/cpp/generator.cc
        ${protobuf_home}/compiler/cpp/message_field.cc
        ${protobuf_home}/compiler/cpp/extension.cc
        ${protobuf_home}/compiler/cpp/padding_optimizer.cc
        ${protobuf_home}/compiler/cpp/message.cc
        ${protobuf_home}/compiler/cpp/primitive_field.cc
        ${protobuf_home}/compiler/cpp/service.cc
        ${protobuf_home}/compiler/cpp/string_field.cc
        ${protobuf_home}/compiler/cpp/parse_function_generator.cc
        ${protobuf_home}/compiler/cpp/field.cc
        ${protobuf_home}/compiler/cpp/map_field.cc
        ${protobuf_home}/compiler/scc.h
        ${protobuf_home}/compiler/importer.cc
        ${protobuf_home}/field_mask.pb.cc
        ${protobuf_home}/repeated_ptr_field.cc
        ${protobuf_home}/timestamp.pb.cc
        ${protobuf_home}/text_format.cc
        ${protobuf_home}/extension_set.cc
        ${protobuf_home}/generated_enum_util.cc
        ${protobuf_home}/generated_message_tctable_full.cc
        )

ADD_EXECUTABLE(protoc ${protobuf_home}/compiler/main.cc ${PROTOBUF_SOURCE_LIST} ${ABSEIL_SOURCE_LIST})
TARGET_LINK_LIBRARIES(protoc ${library_list})
INSTALL(TARGETS protoc DESTINATION ${work_home}/output/bin)

